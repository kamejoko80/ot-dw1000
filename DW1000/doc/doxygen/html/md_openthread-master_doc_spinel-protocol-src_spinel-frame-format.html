<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OT-DW1000: Frame Format</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Open-Thread-Logo-200x42.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OT-DW1000
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Frame Format </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A frame is defined simply as the concatenation of</p>
<ul>
<li>A header byte</li>
<li>A command (up to three bytes, see (#packed-unsigned-integer) for format)</li>
<li>An optional command payload</li>
</ul>
<table class="doxtable">
<tr>
<th>Octets: </th><th>1 </th><th>1-3 </th><th><em>n</em>  </th></tr>
<tr>
<td>Fields: </td><td>HEADER </td><td>CMD </td><td>CMD_PAYLOAD </td></tr>
</table>
<h2>Header Format</h2>
<p>The header byte is broken down as follows: </p><pre class="fragment">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
|  FLG  |  NLI  |      TID      |
+---+---+---+---+---+---+---+---+
</pre><h3>FLG: Flag</h3>
<p>The flag field of the header byte (<code>FLG</code>) is always set to the value two (or <code>10</code> in binary). Any frame received with these bits set to any other value else MUST NOT be considered a Spinel frame.</p>
<p>This convention allows Spinel to be line compatible with BTLE HCI. By defining the first two bit in this way we can disambiguate between Spinel frames and HCI frames (which always start with either <code>0x01</code> or <code>0x04</code>) without any additional framing overhead.</p>
<h3>NLI: Network Link Identifier</h3>
<p>The Network Link Identifier (NLI) is a number between 0 and 3, which is associated by the OS with one of up to four IPv6 zone indices corresponding to conceptual IPv6 interfaces on the NCP. This allows the protocol to support IPv6 nodes connecting simultaneously to more than one IPv6 network link using a single NCP instance. The first Network Link Identifier (0) MUST refer to a distinguished conceptual interface provided by the NCP for its IPv6 link type. The other three Network Link Identifiers (1, 2 and 3) MAY be dissociated from any conceptual interface.</p>
<h3>TID: Transaction Identifier</h3>
<p>The least significant bits of the header represent the Transaction Identifier(TID). The TID is used for correlating responses to the commands which generated them.</p>
<p>When a command is sent from the host, any reply to that command sent by the NCP will use the same value for the TID. When the host receives a frame that matches the TID of the command it sent, it can easily recognize that frame as the actual response to that command.</p>
<p>The TID value of zero (0) is used for commands to which a correlated response is not expected or needed, such as for unsolicited update commands sent to the host from the NCP.</p>
<h3>Command Identifier (CMD)</h3>
<p>The command identifier is a 21-bit unsigned integer encoded in up to three bytes using the packed unsigned integer format described in (#packed-unsigned-integer). This encoding allows for up to 2,097,152 individual commands, with the first 127 commands represented as a single byte. Command identifiers larger than 2,097,151 are explicitly forbidden.</p>
<table class="doxtable">
<tr>
<th>CID Range </th><th>Description  </th></tr>
<tr>
<td>0 - 63 </td><td>Reserved for core commands </td></tr>
<tr>
<td>64 - 15,359 </td><td><em>UNALLOCATED</em> </td></tr>
<tr>
<td>15,360 - 16,383 </td><td>Vendor-specific </td></tr>
<tr>
<td>16,384 - 1,999,999 </td><td><em>UNALLOCATED</em> </td></tr>
<tr>
<td>2,000,000 - 2,097,151 </td><td>Experimental use only </td></tr>
</table>
<h3>Command Payload (Optional)</h3>
<p>Depending on the semantics of the command in question, a payload MAY be included in the frame. The exact composition and length of the payload is defined by the command identifier. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jun 21 2017 18:58:05 for OT-DW1000 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
