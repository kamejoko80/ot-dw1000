<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OT-DW1000: Feature: GPIO Access</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Open-Thread-Logo-200x42.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OT-DW1000
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Feature: GPIO Access </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This feature allows the host to have control over some or all of the GPIO pins on the NCP. The host can determine which GPIOs are available by examining <code>PROP_GPIO_CONFIG</code>, described below. This API supports a maximum of 256 individual GPIO pins.</p>
<p>Support for this feature can be determined by the presence of <code>CAP_GPIO</code>.</p>
<h2>Properties</h2>
<h3>PROP 4096: PROP_GPIO_CONFIG</h3>
<ul>
<li>Argument-Encoding: <code>A(t(CCU))</code></li>
<li>Type: Read-write (Writable only using <code>CMD_PROP_VALUE_INSERT</code>, (#cmd-prop-value-insert))</li>
</ul>
<p>An array of structures which contain the following fields:</p>
<ul>
<li><code>C</code>: GPIO Number</li>
<li><code>C</code>: GPIO Configuration Flags</li>
<li><code>U</code>: Human-readable GPIO name</li>
</ul>
<p>GPIOs which do not have a corresponding entry are not supported.</p>
<p>The configuration parameter contains the configuration flags for the GPIO: </p><pre class="fragment">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
|DIR|PUP|PDN|TRIGGER|  RESERVED |
+---+---+---+---+---+---+---+---+
        |O/D|
        +---+
</pre><ul>
<li><code>DIR</code>: Pin direction. Clear (0) for input, set (1) for output.</li>
<li><code>PUP</code>: Pull-up enabled flag.</li>
<li><code>PDN</code>/<code>O/D</code>: Flag meaning depends on pin direction:<ul>
<li>Input: Pull-down enabled.</li>
<li>Output: Output is an open-drain.</li>
</ul>
</li>
<li><code>TRIGGER</code>: Enumeration describing how pin changes generate asynchronous notification commands (TBD) from the NCP to the host.<ul>
<li>0: Feature disabled for this pin</li>
<li>1: Trigger on falling edge</li>
<li>2: Trigger on rising edge</li>
<li>3: Trigger on level change</li>
</ul>
</li>
<li><code>RESERVED</code>: Bits reserved for future use. Always cleared to zero and ignored when read.</li>
</ul>
<p>As an optional feature, the configuration of individual pins may be modified using the <code>CMD_PROP_VALUE_INSERT</code> command. Only the GPIO number and flags fields MUST be present, the GPIO name (if present) would be ignored. This command can only be used to modify the configuration of GPIOs which are already exposed&mdash;it cannot be used by the host to add addional GPIOs.</p>
<h3>PROP 4098: PROP_GPIO_STATE</h3>
<ul>
<li>Type: Read-Write</li>
</ul>
<p>Contains a bit field identifying the state of the GPIOs. The length of the data associated with these properties depends on the number of GPIOs. If you have 10 GPIOs, you'd have two bytes. GPIOs are numbered from most significant bit to least significant bit, so 0x80 is GPIO 0, 0x40 is GPIO 1, etc.</p>
<p>For GPIOs configured as inputs:</p>
<ul>
<li><code>CMD_PROP_VAUE_GET</code>: The value of the associated bit describes the logic level read from the pin.</li>
<li><code>CMD_PROP_VALUE_SET</code>: The value of the associated bit is ignored for these pins.</li>
</ul>
<p>For GPIOs configured as outputs:</p>
<ul>
<li><code>CMD_PROP_VAUE_GET</code>: The value of the associated bit is implementation specific.</li>
<li><code>CMD_PROP_VALUE_SET</code>: The value of the associated bit determines the new logic level of the output. If this pin is configured as an open-drain, setting the associated bit to 1 will cause the pin to enter a Hi-Z state.</li>
</ul>
<p>For GPIOs which are not specified in <code>PROP_GPIO_CONFIG</code>:</p>
<ul>
<li><code>CMD_PROP_VAUE_GET</code>: The value of the associated bit is implementation specific.</li>
<li><code>CMD_PROP_VALUE_SET</code>: The value of the associated bit MUST be ignored by the NCP.</li>
</ul>
<p>When writing, unspecified bits are assumed to be zero.</p>
<h3>PROP 4099: PROP_GPIO_STATE_SET</h3>
<ul>
<li>Type: Write-only</li>
</ul>
<p>Allows for the state of various output GPIOs to be set without affecting other GPIO states. Contains a bit field identifying the output GPIOs that should have their state set to 1.</p>
<p>When writing, unspecified bits are assumed to be zero. The value of any bits for GPIOs which are not specified in <code>PROP_GPIO_CONFIG</code> MUST be ignored.</p>
<h3>PROP 4100: PROP_GPIO_STATE_CLEAR</h3>
<ul>
<li>Type: Write-only</li>
</ul>
<p>Allows for the state of various output GPIOs to be cleared without affecting other GPIO states. Contains a bit field identifying the output GPIOs that should have their state cleared to 0.</p>
<p>When writing, unspecified bits are assumed to be zero. The value of any bits for GPIOs which are not specified in <code>PROP_GPIO_CONFIG</code> MUST be ignored. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jun 21 2017 18:58:05 for OT-DW1000 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
